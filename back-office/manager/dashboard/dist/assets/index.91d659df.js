import{a as p,r as u,o as _,c as h,b as t,d,w as b,e as k,v as T,p as $,f as y,g as v,h as S,t as l,i as I,j as D,k as C,F as O,l as j,m as G,n as H,q as W,s as K,u as Q,x as J,y as X,C as Y,z as Z}from"./vendor.d762e5d5.js";const tt=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};tt();var et="/dash/assets/logo.8a38ada9.png";var g=(e,s)=>{const n=e.__vccOpts||e;for(const[c,r]of s)n[c]=r;return n};const st={name:"NavBar",components:{},methods:{makeActive(e){this.currentlyActive=e.target.id},async logout(){try{const e=await p.get("/dash/logout")}catch{this.$store.commit("logout"),this.$router.replace("/login")}}},props:["modelValue"],computed:{currentlyActive:{get(){},set(e){this.$emit("update:modelValue",e)}}},mounted(){this.$store.commit("setUser",0)}},U=e=>($("data-v-0b5fc3a2"),e=e(),y(),e),ot={id:"navContainer"},at={class:"navbar navbar-dark bg-primary navbar-expand-lg rounded shadow"},nt={class:"container-fluid"},it=U(()=>t("img",{src:et,id:"logoId",alt:""},null,-1)),rt=U(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),dt={class:"collapse navbar-collapse",id:"navbarSupportedContent"},lt={class:"navbar-nav me-auto mb-2 mb-lg-0"},ct={class:"nav-item"},ut=v("Clienti"),_t=v("Inventario"),ht=v("Noleggi"),mt=v("Dipendenti"),pt=U(()=>t("a",{class:"nav-link",href:"/nnplus/home/inventory"},"Gestionale",-1)),gt=[pt],vt=U(()=>t("button",{class:"nav-link"},"Logout",-1)),ft=[vt];function bt(e,s,n,c,r,o){const i=u("router-link");return _(),h("div",ot,[t("nav",at,[t("div",nt,[it,rt,t("div",dt,[t("ul",lt,[t("li",ct,[d(i,{class:"nav-link",id:"0","aria-current":"clienti",to:"/"},{default:b(()=>[ut]),_:1})]),t("li",{class:"nav-item",onClick:s[0]||(s[0]=(...a)=>o.makeActive&&o.makeActive(...a))},[d(i,{class:"nav-link",id:"1",to:"/inventory"},{default:b(()=>[_t]),_:1})]),t("li",{class:"nav-item",onClick:s[1]||(s[1]=(...a)=>o.makeActive&&o.makeActive(...a))},[d(i,{class:"nav-link",id:"2",to:"/booking"},{default:b(()=>[ht]),_:1})]),t("li",{class:"nav-item",onClick:s[2]||(s[2]=(...a)=>o.makeActive&&o.makeActive(...a))},[d(i,{class:"nav-link",id:"2",to:"/employee"},{default:b(()=>[mt]),_:1})]),t("li",{class:"nav-item",onClick:s[3]||(s[3]=(...a)=>o.makeActive&&o.makeActive(...a))},gt),k(t("li",{class:"nav-item",onClick:s[4]||(s[4]=(...a)=>o.logout&&o.logout(...a))},ft,512),[[T,this.$store.state.logged]])])])])])])}var $t=g(st,[["render",bt],["__scopeId","data-v-0b5fc3a2"]]);const yt={name:"barchart",data:()=>({}),components:{MqResponsive:S},methods:{showInfo(){console.log(this.data)}},props:["data","title"]},wt={class:"graphSm rounded shadow-lg"},kt={class:"text-capitalize d-flex justify-content-center"},Ct={class:"graphLg rounded shadow-lg"},It={class:"text-capitalize d-flex justify-content-center"};function St(e,s,n,c,r,o){const i=u("pie-chart"),a=u("MqResponsive");return _(),h("div",null,[d(a,{target:"md-"},{default:b(()=>[t("div",wt,[t("h5",kt,l(n.title),1),d(i,{data:n.data},null,8,["data"])])]),_:1}),d(a,{target:"lg+"},{default:b(()=>[t("div",Ct,[t("h5",It,l(n.title),1),d(i,{data:n.data},null,8,["data"])])]),_:1})])}var P=g(yt,[["render",St],["__scopeId","data-v-7193a140"]]);const Ut={name:"linechart",data:()=>({}),components:{MqResponsive:S},methods:{showInfo(){console.log(this.data)}},props:["data","title"]},xt={class:"graphSm rounded shadow-lg"},Bt={class:"text-capitalize d-flex justify-content-center"},Pt={class:"graphLg rounded shadow-lg"},Mt={class:"text-capitalize d-flex justify-content-center"};function Lt(e,s,n,c,r,o){const i=u("area-chart"),a=u("MqResponsive");return _(),h("div",null,[d(a,{target:"md-"},{default:b(()=>[t("div",xt,[t("h5",Bt,l(n.title),1),d(i,{data:n.data,download:!0},null,8,["data"])])]),_:1}),d(a,{target:"lg+"},{default:b(()=>[t("div",Pt,[t("h5",Mt,l(n.title),1),d(i,{data:n.data,download:!0},null,8,["data"])])]),_:1})])}var M=g(Ut,[["render",Lt],["__scopeId","data-v-2f80a64d"]]);const Nt={name:"columnchart",data:()=>({}),components:{MqResponsive:S},methods:{showInfo(){console.log(this.data)}},props:["data","title"]},At={class:"graphSm rounded shadow-lg"},Et={class:"text-capitalize d-flex justify-content-center"},Rt={class:"graphLg rounded shadow-lg"},zt={class:"text-capitalize d-flex justify-content-center"};function qt(e,s,n,c,r,o){const i=u("column-chart"),a=u("MqResponsive"),m=u("bar-chart");return _(),h("div",null,[d(a,{target:"md-"},{default:b(()=>[t("div",At,[t("h5",Et,l(n.title),1),d(i,{data:n.data,download:!0},null,8,["data"])])]),_:1}),d(a,{target:"lg+"},{default:b(()=>[t("div",Rt,[t("h5",zt,l(n.title),1),d(m,{data:n.data,download:!0},null,8,["data"])])]),_:1})])}var L=g(Nt,[["render",qt],["__scopeId","data-v-4cbac36b"]]);const Ft={name:"moneydata",data:()=>({totalIncome:0,totalUsers:0,activeUsers:0,inactiveUsers:0}),components:{},methods:{},async mounted(){const e=await p.get("/dash/user/userStat");this.totalIncome=e.data.totalIncome,this.totalUsers=e.data.totalUsers,this.activeUsers=e.data.activeUsers,this.inactiveUsers=e.data.inactiveUsers},props:["data","title"]},x=e=>($("data-v-cdb20602"),e=e(),y(),e),Vt={class:"graph rounded shadow-lg"},Tt={class:"text-capitalize d-flex justify-content-center"},Dt={class:"dataContainer"},Ot={class:"border rounded"},jt=x(()=>t("span",null,"Il fatturato totale attuale corrisponde a:",-1)),Gt={class:"fw-bold"},Ht={class:"border rounded"},Wt=x(()=>t("span",null,"Il numero di utenti totale corrisponde a",-1)),Kt={class:"fw-bold"},Qt={class:"border rounded"},Jt=x(()=>t("span",null,"Il numero di utenti attivi corrisponde a",-1)),Xt={class:"fw-bold"},Yt={class:"border rounded"},Zt=x(()=>t("span",null,"Il numero di utenti inattivi corrisponde a",-1)),te={class:"fw-bold"};function ee(e,s,n,c,r,o){return _(),h("div",Vt,[t("h5",Tt,l(n.title),1),t("div",Dt,[t("section",Ot,[jt,t("span",Gt,"$"+l(e.totalIncome),1)]),t("section",Ht,[Wt,t("span",Kt,l(e.totalUsers),1)]),t("section",Qt,[Jt,t("span",Xt,l(e.activeUsers),1)]),t("section",Yt,[Zt,t("span",te,l(e.inactiveUsers),1)])])])}var A=g(Ft,[["render",ee],["__scopeId","data-v-cdb20602"]]);const se={name:"customerContainer",data:()=>({info:null,some:"Titulo belimpu"}),components:{Piechart:P,Linechart:M,Columnchart:L,Moneydata:A},methods:{showInfo(){console.log(this.info)}},props:[]},oe=e=>($("data-v-1b1baf88"),e=e(),y(),e),ae={id:"customerContainer",class:"shadow rounded"},ne=oe(()=>t("h2",{class:"border-bottom border-2 pt-2"},"Dashboard utenti",-1)),ie={class:"graphContainer"};function re(e,s,n,c,r,o){const i=u("Moneydata"),a=u("Columnchart"),m=u("Piechart");return _(),h("div",ae,[ne,d(i,{title:"Statistiche"}),t("div",ie,[d(a,{data:"/dash/user/userAge",title:"Eta' degli utenti"}),d(m,{data:"/dash/user/userPoint",title:"Quantita' media di punti per fasce di eta'"}),d(a,{data:"/dash/user/userAgeSpend",title:"Spesa media degli utenti per eta'"}),d(m,{data:"/dash/user/userFeed",title:"Numero feedback dipendenti per fascia di eta' di clienti"})])])}var E=g(se,[["render",re],["__scopeId","data-v-1b1baf88"]]);const de={name:"inventorydata",data:()=>({data:{totalNumber:0,computerCurrentlyInUse:0,computerCurrentlyUnavailableCount:0,maxComputer:{brand:"",model:""}}}),components:{},methods:{},async mounted(){const e=await p.get("/dash/inv/invStat");this.data=e.data},update(){console.log(this.icon)},props:["data","title"]},le=e=>($("data-v-78753b10"),e=e(),y(),e),ce={class:"graph rounded shadow-lg"},ue={class:"text-capitalize d-flex justify-content-center"},_e={class:"dataContainer"},he={class:"border rounded"},me=v(" Computer presenti nel sistema: "),pe={class:"fw-bold"},ge={class:"border rounded"},ve=v(" Computer attualmente in prestito: "),fe={class:"fw-bold"},be={class:"border rounded"},$e=v(" Computer funzionanti: "),ye={class:"fw-bold"},we={class:"border rounded"},ke=v(" Computer in riparazione: "),Ce={class:"fw-bold"},Ie={class:"border rounded"},Se=v(" Computer con fatturato maggiore: "),Ue=le(()=>t("br",null,null,-1)),xe={class:"fw-bold d-flex justify-content-center text-uppercase"};function Be(e,s,n,c,r,o){return _(),h("div",ce,[t("h5",ue,l(n.title),1),t("div",_e,[t("section",he,[me,t("span",pe,l(this.data.totalNumber),1)]),t("section",ge,[ve,t("span",fe,l(this.data.computerCurrentlyInUse),1)]),t("section",be,[$e,t("span",ye,l(this.data.totalNumber-this.data.computerCurrentlyUnavailableCount),1)]),t("section",we,[ke,t("span",Ce,l(this.data.computerCurrentlyUnavailableCount),1)]),t("section",Ie,[Se,Ue,t("span",xe,l(this.data.maxComputer.brand)+" "+l(this.data.maxComputer.model),1)])])])}var Pe=g(de,[["render",Be],["__scopeId","data-v-78753b10"]]);const Me={name:"inventoryContainer",data:()=>({info:null}),components:{Piechart:P,Linechart:M,Columnchart:L,Invdata:Pe},methods:{showInfo(){console.log(this.info)}},props:[]},Le=e=>($("data-v-119ded82"),e=e(),y(),e),Ne={id:"customerContainer",class:"shadow rounded"},Ae=Le(()=>t("h2",{class:"border-bottom border-2 pt-2"},"Dashboard inventario",-1)),Ee={class:"graphContainer"};function Re(e,s,n,c,r,o){const i=u("Invdata"),a=u("Piechart"),m=u("Columnchart");return _(),h("div",Ne,[Ae,d(i,{title:"Statistiche"}),t("div",Ee,[d(a,{data:"/dash/inv/brandProfit",title:"Fatturato per marca"}),d(m,{data:"/dash/inv/computerMostUsed",title:"Numero di prenotazioni per computer"}),d(m,{data:"/dash/inv/maxPricePerComputer",title:"Fatturato per computer"}),d(a,{data:"/dash/inv/componentNumbers",title:"Numero di componenti per categoria"})])])}var R=g(Me,[["render",Re],["__scopeId","data-v-119ded82"]]);const ze={name:"scatterchart",data:()=>({}),components:{MqResponsive:S},methods:{showInfo(){console.log(this.data)}},props:["data","title"]},qe={class:"graphSm rounded shadow-lg"},Fe={class:"text-capitalize d-flex justify-content-center"},Ve={class:"graphLg rounded shadow-lg"},Te={class:"text-capitalize d-flex justify-content-center"};function De(e,s,n,c,r,o){const i=u("line-chart"),a=u("MqResponsive"),m=u("scatter-chart");return _(),h("div",null,[d(a,{target:"md-"},{default:b(()=>[t("div",qe,[t("h5",Fe,l(n.title),1),d(i,{data:n.data,download:!0},null,8,["data"])])]),_:1}),d(a,{target:"lg+"},{default:b(()=>[t("div",Ve,[t("h5",Te,l(n.title),1),d(m,{data:n.data,download:!0},null,8,["data"])])]),_:1})])}var Oe=g(ze,[["render",De],["__scopeId","data-v-1c32587b"]]);const je={name:"bookingdata",data:()=>({totalBookings:0,activeBookings:0,futureBookings:0,pastBookings:0,lateBookings:0}),components:{},methods:{},async mounted(){const e=await p.get("/dash/booking/bookingStat");console.log(e.data),this.totalBookings=e.data.totalBookings,this.activeBookings=e.data.activeBookings,this.futureBookings=e.data.futureBookings,this.pastBookings=e.data.pastBookings,this.lateBookings=e.data.lateBookings},props:["data","title"]},Ge={class:"graph rounded shadow-lg"},He={class:"text-capitalize d-flex justify-content-center"},We={class:"dataContainer"},Ke={class:"border rounded"},Qe=v(" Numero totale di noleggi : "),Je={class:"fw-bold"},Xe={class:"border rounded"},Ye=v(" Numero di noleggi attivi: "),Ze={class:"fw-bold"},ts={class:"border rounded"},es=v(" Numero di noleggi futuri: "),ss={class:"fw-bold"},os={class:"border rounded"},as=v(" Numero di noleggi terminati con successo: "),ns={class:"fw-bold"},is={class:"border rounded"},rs=v(" Noleggi non restitutiti o non pagati: "),ds={class:"fw-bold"};function ls(e,s,n,c,r,o){return _(),h("div",Ge,[t("h5",He,l(n.title),1),t("div",We,[t("section",Ke,[Qe,t("span",Je,l(e.totalBookings),1)]),t("section",Xe,[Ye,t("span",Ze,l(e.activeBookings),1)]),t("section",ts,[es,t("span",ss,l(e.futureBookings),1)]),t("section",os,[as,t("span",ns,l(e.pastBookings),1)]),t("section",is,[rs,t("span",ds,l(e.lateBookings),1)])])])}var cs=g(je,[["render",ls],["__scopeId","data-v-88700332"]]);const us={name:"bookingContainer",data:()=>({info:null,some:"Titulo belimpu"}),components:{Piechart:P,Linechart:M,Columnchart:L,Moneydata:A,Bookingdata:cs,Scatterchart:Oe},methods:{showInfo(){console.log(this.info)}},props:[],mounted(){p.get("/dash/user/userAge").then(e=>this.info=e.data)}},_s=e=>($("data-v-1fb46350"),e=e(),y(),e),hs={id:"customerContainer",class:"shadow rounded"},ms=_s(()=>t("h2",{class:"border-bottom border-2 pt-2"},"Dashboard noleggi",-1)),ps={class:"graphContainer"};function gs(e,s,n,c,r,o){const i=u("bookingdata"),a=u("linechart"),m=u("Piechart"),V=u("columnchart");return _(),h("div",hs,[ms,d(i,{title:"Statistiche"}),t("div",ps,[d(a,{data:"/dash/booking/bookingPerMonth",title:"guadagni nell'ultimo anno"}),d(m,{data:"/dash/booking/mostBookedMonths",title:"distribuzione dei noleggi nei mesi"}),d(V,{data:"/dash/booking/bookingStatus",title:"Situazione delle prenotazioni"})])])}var z=g(us,[["render",gs],["__scopeId","data-v-1fb46350"]]);const vs={name:"login",data:()=>({info:null,some:"Titulo belimpu",showError:!1}),props:[],components:{},methods:{showInfo(){console.log(this.info)},async handleLogin(e){e.preventDefault();try{const s=await p.post("/dash/login",{mail:e.target.elements[0].value,password:e.target.elements[1].value});console.log("RIUSCITO"),console.log(s),this.showError=!1,this.$store.commit("login"),await this.setUser(),this.$router.replace("/")}catch(s){this.showError=!0,setTimeout(()=>{this.showError=!1},3e3),console.log(s)}},async setUser(){const e=await p.get("/dash/empl/whoAmI");e.data.success?this.$store.commit("setUser",e.data.payload._id):this.$store.commit("setUser",0)}},mounted(){this.$store.commit("logout")}},B=e=>($("data-v-d21c9988"),e=e(),y(),e),fs={id:"customerContainer",class:"shadow rounded"},bs=B(()=>t("h2",{class:"border-bottom border-2 pt-2"},"Login",-1)),$s=B(()=>t("input",{required:"",class:"form-control",placeholder:"E-mail",type:"text"},null,-1)),ys=B(()=>t("input",{required:"",class:"form-control",placeholder:"Password",type:"password"},null,-1)),ws=B(()=>t("button",{class:"btn btn-primary"},"Accedi",-1)),ks=[$s,ys,ws],Cs={key:0,class:"animate__animated animate__bounceIn",id:"errMsg"};function Is(e,s,n,c,r,o){return _(),h("div",fs,[bs,t("form",{id:"loginForm",onSubmit:s[0]||(s[0]=(...i)=>o.handleLogin&&o.handleLogin(...i))},ks,32),e.showError?(_(),h("div",Cs," Login fallito ")):I("",!0)])}var q=g(vs,[["render",Is],["__scopeId","data-v-d21c9988"]]);const Ss={name:"App",components:{NavBar:$t,CustomerContainer:E,InventoryContainer:R,BookingContainer:z,Login:q},data:()=>({isVisible:!1,currentlyShowing:0,showCustomer:!0,showInv:!1,showBooking:!1,logged:!1}),methods:{toggleBox(){this.isVisible=!this.isVisible},async setUser(){const e=await p.get("/dash/empl/whoAmI");e.data.success?this.$store.commit("setUser",e.data.payload._id):this.$store.commit("setUser",0)},test(){console.log(this.$store.state.userId)}},async mounted(){await this.setUser()},async updated(){console.log("updated"),await this.setUser(),this.currentlyShowing==0?(this.showCustomer=!0,this.showInv=!1,this.showBooking=!1):this.currentlyShowing==1?(this.showCustomer=!1,this.showInv=!0,this.showBooking=!1):(this.showCustomer=!1,this.showInv=!1,this.showBooking=!0)}},Us={id:"globalContainer"};function xs(e,s,n,c,r,o){const i=u("NavBar"),a=u("router-view");return _(),h("div",Us,[d(i,{onClick:o.test,modelValue:e.currentlyShowing,"onUpdate:modelValue":s[0]||(s[0]=m=>e.currentlyShowing=m),logged:e.logged},null,8,["onClick","modelValue","logged"]),d(a)])}var Bs=g(Ss,[["render",xs]]);var Ps=D();const Ms="modulepreload",N={},Ls="/dash/",Ns=function(s,n){return!n||n.length===0?s():Promise.all(n.map(c=>{if(c=`${Ls}${c}`,c in N)return;N[c]=!0;const r=c.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${o}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":Ms,r||(i.as="script",i.crossOrigin=""),i.href=c,document.head.appendChild(i),r)return new Promise((a,m)=>{i.addEventListener("load",a),i.addEventListener("error",m)})})).then(()=>s())};async function As(){(await Ns(()=>import("./webfontloader.f5e2b0ed.js").then(function(s){return s.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const Es={data:()=>({totalNum:0,totalPrice:0,avgPrice:0,maximumPrice:0,minimumPrice:0}),props:["user","updateList"],methods:{async deleteThis(){const e=await p.post("/dash/empl/deleteOne",{mail:this.user.person.mail});alert(e.data.message),this.updateList()},async promote(){const e=await p.post("/dash/empl/promote",{mail:this.user.person.mail});e.data.success?(alert(`${this.user.person.name} ${this.user.person.surname} promosso con successo!`),this.updateList()):(alert("Promozioe fallita"),console.log(e.data.error))},showBookings(){sessionStorage.setItem("emplId",this.user._id),console.log(sessionStorage),window.location.href="/nnplus/home/booking"}},async mounted(){const e=await p.get("/dash/empl/getStats",{params:{id:this.user._id}});if(e.data.success&&e.data.payload.length>0){const s=e.data.payload[0];this.totalNum=s.totalNum,this.totalPrice=s.totalPrice.toFixed(2),this.avgPrice=s.avgPrice.toFixed(2),this.maximumPrice=s.maximumPrice.toFixed(2),this.minimumPrice=s.minimumPrice.toFixed(2)}}},w=e=>($("data-v-056bfd9c"),e=e(),y(),e),Rs={class:"card emplCard"},zs={class:"card-body"},qs={class:"card-box"},Fs={class:"emplDetails"},Vs=w(()=>t("div",{class:"fw-bold"},"Nome",-1)),Ts={class:"text-capitalize"},Ds=w(()=>t("div",{class:"fw-bold"},"cognome",-1)),Os={class:"text-capitalize"},js=w(()=>t("div",{class:"fw-bold"},"E-mail",-1)),Gs={class:"buttonGroup"},Hs=["data-bs-target"],Ws=["id"],Ks={class:"card card-body emplStat"},Qs={class:"border-bottom"},Js=w(()=>t("span",{class:"fw-bold"}," Numero di prenotazioni: ",-1)),Xs={class:"border-bottom"},Ys=w(()=>t("span",{class:"fw-bold"}," Fatturato totale: ",-1)),Zs={class:"border-bottom"},to=w(()=>t("span",{class:"fw-bold"}," Fatturato medio: ",-1)),eo={class:"border-bottom"},so=w(()=>t("span",{class:"fw-bold"}," Massima fattura: ",-1)),oo={class:"border-bottom"},ao=w(()=>t("span",{class:"fw-bold"}," Minima fattura: ",-1));function no(e,s,n,c,r,o){return _(),h("div",Rs,[t("div",zs,[t("div",qs,[t("ul",Fs,[t("li",null,[Vs,t("div",Ts,l(n.user.person.name),1)]),t("li",null,[Ds,t("div",Os,l(n.user.person.surname),1)]),t("li",null,[js,t("div",null,l(n.user.person.mail),1)])])]),t("div",Gs,[t("button",{onClick:s[0]||(s[0]=(...i)=>o.showBookings&&o.showBookings(...i)),class:"btn btn-primary"}," Mostra prenotazioni "),n.user.person.role==1?(_(),h("button",{key:0,onClick:s[1]||(s[1]=(...i)=>o.promote&&o.promote(...i)),class:"btn btn-success"}," Promuovi ")):I("",!0),n.user._id!=this.$store.state.userId?(_(),h("button",{key:1,onClick:s[2]||(s[2]=(...i)=>o.deleteThis&&o.deleteThis(...i)),class:"btn btn-danger"}," Elimina ")):I("",!0),t("button",{class:"btn btn-primary","data-bs-toggle":"collapse","data-bs-target":"#"+n.user.person.mail.replace("@",""),"aria-expanded":"false","aria-controls":"collapseExample"}," Mostra Statistiche ",8,Hs)]),t("div",{class:"collapse statContainer",id:n.user.person.mail.replace("@","")},[t("div",Ks,[t("section",Qs,[Js,t("span",null,l(e.totalNum),1)]),t("section",Xs,[Ys,t("span",null,l(e.totalPrice)+"$",1)]),t("section",Zs,[to,t("span",null,l(e.avgPrice)+"$",1)]),t("section",eo,[so,t("span",null,l(e.maximumPrice)+"$",1)]),t("section",oo,[ao,t("span",null,l(e.minimumPrice)+"$",1)])])],8,Ws)])])}var io=g(Es,[["render",no],["__scopeId","data-v-056bfd9c"]]);const ro={name:"employee",components:{EmployeeCard:io},data:()=>({searchMail:"",data:[],addUser:{person:{name:"",surname:"",mail:"",password:"",role:1,picture:""}},alert:!1,alertMsg:"dioCane",alertStyle:{color:"red"}}),methods:{async updateList(){const e=await p.get("/dash/empl/getAll");this.data=e.data},async addUserSubmit(e){e.preventDefault(),e.target.reset();const s=await p.post("/dash/empl/addOne",this.addUser);console.log(s.data),this.resetAddUser(),this.alertMsg=s.data.message,this.alertStyle.color=s.data.success?"green":"red",this.alert=!0,setTimeout(()=>{this.alert=!1},3e3),await this.updateList()},resetAddUser(){this.addUser.person.name="",this.addUser.person.surname="",this.addUser.person.mail="",this.addUser.person.password="",this.addUser.person.role=1},async searchSubmit(e){e.preventDefault();const s=await p.get("/dash/empl/getOne",{params:{mail:this.searchMail}});s.data.success&&s.data.payload.length>0?this.data=s.data.payload:alert("Errore durante la ricerca o nessun utente trovato")}},async mounted(){await this.updateList()}},f=e=>($("data-v-3497b99a"),e=e(),y(),e),lo={id:"customerContainer",class:"shadow rounded"},co=f(()=>t("h2",{class:"border-bottom border-2 pt-2"},"Gestione Dipendenti",-1)),uo={id:"topBar"},_o=f(()=>t("button",{class:"btn btn-primary"},"Cerca",-1)),ho={class:"d-flex align-items-center"},mo=f(()=>t("button",{id:"addModalToggle",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addModal"}," Aggiungi Dipendente ",-1)),po={id:"employeeList"},go={class:"modal fade",id:"addModal",tabindex:"-1","aria-hidden":"true"},vo={class:"modal-dialog"},fo={class:"modal-content"},bo=f(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"addModalTitle"},"Aggiungi Dipendente"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Chiudi modale"})],-1)),$o={class:"modal-body"},yo=f(()=>t("span",{class:"fw-bold"},"Nome:",-1)),wo=f(()=>t("span",{class:"fw-bold"},"Cognome:",-1)),ko=f(()=>t("span",{class:"fw-bold"},"E-mail:",-1)),Co=f(()=>t("span",{class:"fw-bold"},"Password:",-1)),Io=f(()=>t("span",{class:"fw-bold"},"Ruolo:",-1)),So=f(()=>t("option",{value:"0"},"Manager",-1)),Uo=f(()=>t("option",{value:"1"},"Dipendente",-1)),xo=[So,Uo],Bo={class:"modal-footer"},Po=f(()=>t("button",{style:{color:"white"},class:"btn btn-primary",type:"submit",form:"addForm"}," Aggiungi ",-1)),Mo=f(()=>t("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"}," Chiudi ",-1));function Lo(e,s,n,c,r,o){const i=u("EmployeeCard");return _(),h("div",lo,[co,t("div",uo,[t("form",{onSubmit:s[1]||(s[1]=(...a)=>o.searchSubmit&&o.searchSubmit(...a)),id:"searchForm"},[k(t("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=a=>e.searchMail=a),"aria-label":"Inserisci mail dipendente",placeholder:"Inserisci mail dipendente",class:"form-control",type:"text",id:"searchInput"},null,512),[[C,e.searchMail]]),_o],32),t("div",ho,[t("button",{onClick:s[2]||(s[2]=(...a)=>o.updateList&&o.updateList(...a)),class:"btn btn-warning m-1",id:"resetBtn"}," Reset "),mo])]),t("div",po,[(_(!0),h(O,null,j(e.data,a=>(_(),W(i,{user:a,updateList:o.updateList,key:a._id},null,8,["user","updateList"]))),128))]),t("div",go,[t("div",vo,[t("div",fo,[bo,t("div",$o,[t("form",{id:"addForm",class:"w-75",onSubmit:s[8]||(s[8]=(...a)=>o.addUserSubmit&&o.addUserSubmit(...a))},[t("div",null,[yo,k(t("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>e.addUser.person.name=a),required:"",type:"text",class:"form-control",id:"addName"},null,512),[[C,e.addUser.person.name]])]),t("div",null,[wo,k(t("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>e.addUser.person.surname=a),required:"",type:"text",class:"form-control",id:"addSurname"},null,512),[[C,e.addUser.person.surname]])]),t("div",null,[ko,k(t("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>e.addUser.person.mail=a),required:"",type:"email",class:"form-control",id:"addMail"},null,512),[[C,e.addUser.person.mail]])]),t("div",null,[Co,k(t("input",{"onUpdate:modelValue":s[6]||(s[6]=a=>e.addUser.person.password=a),required:"",type:"password",class:"form-control",id:"AddPassword"},null,512),[[C,e.addUser.person.password]])]),t("div",null,[Io,k(t("select",{"onUpdate:modelValue":s[7]||(s[7]=a=>e.addUser.person.role=a),required:"",class:"form-select",id:"addSelect"},xo,512),[[G,e.addUser.person.role]])])],32)]),t("div",Bo,[e.alert?(_(),h("p",{key:0,class:"animate__animated animate__bounceIn",style:H(e.alertStyle)},l(e.alertMsg),5)):I("",!0),Po,Mo])])])])])}var No=g(ro,[["render",Lo],["__scopeId","data-v-3497b99a"]]);const Ao=[{path:"/",component:E},{path:"/inventory",component:R},{path:"/booking",component:z},{path:"/employee",component:No},{path:"/login",component:q}],F=K({history:Q(),routes:Ao});F.beforeEach(async(e,s)=>{if(console.log("FROM ROUTER"),console.log(e.fullPath),console.log("END ROUTER"),e.fullPath=="/login")return!0;try{const n=await p.get("/dash/protect");console.log(n)}catch{return console.error("USER NOT LOGGED"),"/login"}});As();Chartkick.options={colors:["#ff3333","#0066ff","#9933ff","#e6e600","#000099","#994d00","#1aff1a","#00e6e6","#666699","#336600","#ff66cc","#999966"]};const Eo=J({state(){return{logged:!0,userId:{}}},mutations:{logout(e){e.logged=!1},login(e){e.logged=!0},setUser(e,s){e.userId=s}}});X(Bs).use(Ps).use(F).use(Eo).use(Y).use(Z,{preset:"bootstrap5"}).mount("#app");
